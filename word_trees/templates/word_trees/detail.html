{% load static from staticfiles %}

<link rel="stylesheet" type="text/css" href="../../static/word_trees/style.css"/>
<script src="../../static/word_trees/processing-1.4.1.min.js"></script>



{% if words %}
	<ul>
		{% for w in words %}
			<li><a href="/word_trees/{{ w.id }}">{{ w.user_input }}</a></li>
		{% endfor %}
	</ul>
{% else %}
	<p>No data available.</p>
{% endif %}
    <div id="msg">
    </div>
    <script type="application/javascript">
        var json = '[{"result":true,"count":1}]',
    	obj2 = JSON.parse(json);
        //var json2 = '{{ data }}';
        //obj = JSON.parse(json2);
        // obj = '{{ data }}'
        var myJSONtext = "{{ data }}"
        //var myObject = JSON.parse(myJSONtext);
        //var myObject = eval('(' + myJSONtext + ')');
        var jsString = "Hello from JavaScript!";
        var jsString = "{{ this_word.user_input }}";
        var printMessage = function (msg) {
            document.getElementById('msg').innerHTML = "Message: " + msg;
        };
    </script>

<script type="text/processing" data-processing-target="processing-canvas">
// find reference at http://processingjs.org/articles/jsQuickStart.html
String processingString = "Hello from processing";

void setup() {
  printMessage(jsString + " " + processingString);
  size(500, 500);
  background(100);
  stroke(255);
<!--   		{% for w in words %}
			text("{{ w.user_input }}", random(200), random(200));
		{% endfor %} -->

}

//var dat = eval("("+obj+")");

void draw() {
	background(100)
//drawWord(5, 'hello');	
//drawWord(2, "{{ this_word.user_input }}");
drawWord(2, 'this_word.user_input');

{% for each in all_words%}
translate(width/2, height/2)
pushMatrix();

rotate(("{{each.id}}"/10)*2*PI+millis()/1000);
drawWord("{{ each.id }}" * .1, "{{ each.user_input }}");
//popMatrix();
//{% endfor each %}	
}

void drawWord(int id_in, String_in){

//	text(String_in, mouseX + id_in, mouseY + id_in);
//	eval(text({{ all_words.count }}, mouseX + id_in, mouseY + id_in + 15 ));
eval('text({{' + String_in + '}}, mouseX + id_in, mouseY + id_in + 15 )');

 //   text({{ String_in.count }}, mouseX + id_in, mouseY + id_in + 30);
//    text(obj[0], mouseX + id_in, mouseY + id_in + 30 );
//    x = eval("{{" + String_in + "}}")
//	text(eval('{{' + String_in + '}}'), mouseX + id_in, mouseY + id_in + 45 );

//	text(obj2[0], mouseX + id_in, mouseY + id_in + 45 );
//	text(dat[1].fields.user_input, mouseY + id_i + 60)
//
}



</script>
<canvas id="processing-canvas"> </canvas>
